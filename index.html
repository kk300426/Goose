<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Goose Shooting Game</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(to top, #87ceeb, #ffffff);
      font-family: Arial, sans-serif;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: url('background.jpg') no-repeat center center;
      background-size: cover;
    }
    #ui {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: #fff;
      text-align: center;
    }
    .popup {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      color: #fff;
      border-radius: 10px;
      display: none;
      text-align: center;
    }
    .popup button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 5px;
      background: #28a745;
      color: #fff;
      cursor: pointer;
    }
    .popup button:hover {
      background: #218838;
    }
  </style>
</head>
<body>
  <div id="ui">
    <div>Score: <span id="score">0</span></div>
    <div>Timer: <span id="timer">60</span>s</div>
  </div>
  
  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <!-- Pause Popup -->
  <div id="pausePopup" class="popup">
    <h2>Game Paused</h2>
    <button onclick="resumeGame()">Continue</button>
    <button onclick="restartGame()">Restart</button>
  </div>

  <!-- Game Over Popup -->
  <div id="gameOverPopup" class="popup">
    <h2>Game Over!</h2>
    <p>Your Score: <span id="finalScore">0</span></p>
    <p>Accuracy: <span id="accuracy">0%</span></p>
    <button onclick="restartGame()">Restart</button>
  </div>
<script>
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");

  let score = 0;
  let shotsFired = 0;
  let shotsHit = 0;
  let timeLeft = 60;
  let gameInterval;
  let timerInterval;
  let isPaused = false;

  const gooseImageLeft = new Image();
  gooseImageLeft.src = 'goose_left.png';

  const gooseImageRight = new Image();
  gooseImageRight.src = 'goose_right.png';

  const shootSound = new Audio('shoot.mp3');
  const hitSound = new Audio('hit.mp3');
  const bgMusic = new Audio('background.mp3');
  bgMusic.loop = true;

  let goose = {
    x: Math.random() * (canvas.width - 100),
    y: Math.random() * (canvas.height - 100),
    width: 100,
    height: 100,
    speedX: Math.random() * 4 + 2,
    speedY: Math.random() * 4 + 2,
    direction: "right"
  };

  function startGame() {
    bgMusic.play();
    gameInterval = requestAnimationFrame(updateGame);
    timerInterval = setInterval(updateTimer, 1000);
  }

  function updateTimer() {
    if (!isPaused) {
      timeLeft--;
      document.getElementById("timer").textContent = timeLeft;
      if (timeLeft <= 0) {
        endGame();
      }
    }
  }

  function pauseGame() {
    isPaused = true;
    bgMusic.pause();
    cancelAnimationFrame(gameInterval);
    document.getElementById("pausePopup").style.display = "block";
  }

  function resumeGame() {
    isPaused = false;
    bgMusic.play();
    document.getElementById("pausePopup").style.display = "none";
    gameInterval = requestAnimationFrame(updateGame);
  }

  function restartGame() {
    score = 0;
    shotsFired = 0;
    shotsHit = 0;
    timeLeft = 60;
    goose.x = Math.random() * (canvas.width - goose.width);
    goose.y = Math.random() * (canvas.height - goose.height);
    document.getElementById("score").textContent = score;
    document.getElementById("timer").textContent = timeLeft;
    document.getElementById("pausePopup").style.display = "none";
    document.getElementById("gameOverPopup").style.display = "none";
    bgMusic.currentTime = 0;
    bgMusic.play();
    isPaused = false;
    clearInterval(timerInterval);
    timerInterval = setInterval(updateTimer, 1000);
    gameInterval = requestAnimationFrame(updateGame);
  }
function updateGame() {
    if (isPaused) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Move the goose
    goose.x += goose.speedX;
    goose.y += goose.speedY;

    // Bounce the goose off the edges
    if (goose.x + goose.width > canvas.width || goose.x < 0) {
      goose.speedX *= -1;
      goose.direction = goose.speedX > 0 ? "right" : "left";
    }
    if (goose.y + goose.height > canvas.height || goose.y < 0) {
      goose.speedY *= -1;
    }

    // Draw goose
    if (goose.direction === "right") {
      ctx.drawImage(gooseImageRight, goose.x, goose.y, goose.width, goose.height);
    } else {
      ctx.drawImage(gooseImageLeft, goose.x, goose.y, goose.width, goose.height);
    }

    // Draw score and timer (optional, already done in HTML)

    gameInterval = requestAnimationFrame(updateGame);
  }

  canvas.addEventListener("click", function(event) {
    if (isPaused) return;

    shootSound.currentTime = 0;
    shootSound.play();

    shotsFired++;

    const rect = canvas.getBoundingClientRect();
    const mouseX = event.clientX - rect.left;
    const mouseY = event.clientY - rect.top;

    if (
      mouseX >= goose.x &&
      mouseX <= goose.x + goose.width &&
      mouseY >= goose.y &&
      mouseY <= goose.y + goose.height
    ) {
      hitSound.currentTime = 0;
      hitSound.play();

      score += 10;
      shotsHit++;

      goose.x = Math.random() * (canvas.width - goose.width);
      goose.y = Math.random() * (canvas.height - goose.height);
    }

    document.getElementById("score").textContent = score;
  });

  function endGame() {
    cancelAnimationFrame(gameInterval);
    clearInterval(timerInterval);
    bgMusic.pause();

    const accuracy = shotsFired > 0 ? ((shotsHit / shotsFired) * 100).toFixed(2) : 0;
    document.getElementById("finalScore").textContent = score;
    document.getElementById("accuracy").textContent = accuracy;
    document.getElementById("gameOverPopup").style.display = "block";

    saveScore(score);
  }

  function saveScore(score) {
    let highScores = JSON.parse(localStorage.getItem("highScores")) || [];
    highScores.push(score);
    localStorage.setItem("highScores", JSON.stringify(highScores));
  }
</script>
<style>
  body {
    text-align: center;
    background-color: #cce7ff;
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
  }

  canvas {
    border: 2px solid #333;
    background: linear-gradient(#87ceeb, #ffffff);
  }

  #pauseMenu, #gameOverPopup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border: 2px solid #333;
    display: none;
    z-index: 2;
  }

  #pauseMenu button, #gameOverPopup button {
    margin: 5px;
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
  }

  button {
    margin-top: 10px;
  }

</style>

</body>
</html>
