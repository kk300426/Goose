document.getElementById('continueBtn').addEventListener('click', () => {
  const maxUnlockedLevel = getMaxUnlockedLevel();
  level = maxUnlockedLevel;
  speed = 5 + (level - 1);
  timer = 40;
  score = 0;
  timerDisplay.textContent = `Time: ${timer}s`;
  scoreBoard.innerText = `Score: ${score}`;
  document.getElementById("startPopup").style.display = "none";
  document.querySelectorAll('.goose').forEach(g => g.remove());
  spawnGeese(level);
  startTimer();
});

function getMaxUnlockedLevel() {
  let max = 1;
  for (let i = 1; i <= 100; i++) {
    if (localStorage.getItem(`level_${i}_stars`)) {
      max = i;
    } else break;
  }
  return max;
}
